@model List<GetLast3BlogWithCategoryandAuthorViewModel>

<div class="sidebar-widget blog-widget-latest">
    <h3 class="widget-title">Son Bloglar</h3>

    <div class="recent-posts-list">
        @foreach (var item in Model)
        {
            <a href="#" class="recent-post-link">
                <div class="post-image-container">
                    <img src="@item.CoverImageUrl"
                         alt="@item.Title"
                         class="post-image"
                         loading="lazy">
                </div>

                <div class="post-content">
                    <h4 class="post-title">@item.Title</h4>
                    <div class="post-meta">
                        <span class="meta-item date-item">
                            <i class="fas fa-calendar-alt"></i>
                            @item.CreatedDate.ToShortDateString()
                        </span>
                        <span class="meta-item comment-count">
                            <i class="fas fa-comment"></i>
                            @{
                                var counts = ViewBag.CommentCounts as Dictionary<int, int>;
                                var c = counts != null && counts.ContainsKey(item.BlogId) ? counts[item.BlogId] : 0;
                            }
                            @c Yorum
                        </span>
                        <span class="meta-item author-item">
                            <i class="fas fa-user"></i>
                            @item.AuthorName
                        </span>
                    </div>
                </div>
            </a>
        }
    </div>
</div>

<style>
    /* --- Widget Container Styles --- */
    .sidebar-widget {
        padding: 25px;
        margin-bottom: 30px;
        background-color: #ffffff;
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
    }

    .widget-title {
        font-size: 1.6rem;
        font-weight: 700;
        color: #2c3e50;
        /* BAŞLIK VE İLK ÖĞE ARASINDAKİ BOŞLUĞU ARTIRDIK */
        margin-bottom: 25px;
        padding-bottom: 15px; /* Boşluk artışı için padding de yükseltildi */
        border-bottom: 3px solid #f0f0f0;
    }

    /* --- List & Item Styles --- */
    .recent-posts-list {
        display: flex;
        flex-direction: column;
    }

    .recent-post-link {
        display: flex;
        align-items: center;
        padding: 15px 0;
        text-decoration: none;
        color: inherit;
        border-bottom: 1px solid #ecf0f1;
        transition: background-color 0.2s ease-in-out;
    }

        .recent-post-link:hover {
            background-color: #fcfcfc;
            color: #3498db;
        }

    .recent-posts-list .recent-post-link:last-child {
        border-bottom: none;
    }

    /* --- Image Styles (Fotoğraf Büyütülmüş Hali) --- */
    .post-image-container {
        flex-shrink: 0;
        /* Fotoğraf boyutunu 65px'den 80px'e çıkardık */
        width: 120px;
        height: 120px;
        border-radius: 6px;
        overflow: hidden;
        margin-right: 18px; /* Boşluğu da biraz artırdık */
    }

    .post-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.3s ease;
    }

    .recent-post-link:hover .post-image {
        transform: scale(1.08);
    }

    /* --- Content Styles --- */
    .post-content {
        flex-grow: 1;
    }

    .post-title {
        margin: 0 0 5px 0;
        font-size: 0.95rem;
        line-height: 1.4;
        font-weight: 600;
        color: #495057;
        transition: color 0.2s;
    }

    .recent-post-link:hover .post-title {
        color: #3498db;
    }

    /* --- Metadata Styles (Yorum Sayısı Ortada) --- */
    .post-meta {
        font-size: 0.8rem;
        color: #95a5a6;
        display: flex;
        flex-wrap: wrap;
        gap: 12px; /* Meta öğeler arasındaki boşluk */
        /* Yorum sayısı HTML'de ikinci sırada olduğu için bu zaten ortada görünecektir. */
        /* Sıralama: Gün | Yorum Sayısı | Yazar */
    }

    .meta-item i {
        margin-right: 4px;
        color: #bdc3c7;
    }

    /* Yorum sayısını daha belirgin yapmak isterseniz */
    .meta-item.comment-count {
        font-weight: 600;
        color: #7f8c8d;
    }
</style>
